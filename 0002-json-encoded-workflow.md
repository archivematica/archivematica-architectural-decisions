---
layout: page
status: accepted
adr: "0002"
title: JSON-encoded workflow
deciders:
date:
---

## Context and problem statement

The core of Archivematica is a server application that coordinates work across
multiple workers. The collection of related tasks (also known as *workflow
data*) is stored in the application database using a relation model.

Introducing changes to the workflow data is hard because the model is clumsy and
convoluted. Changes to the data are delivered as data and schema migrations
which are difficult to implement and they add risk to the process of upgrading
the software.

Additionally, we want to add full internationalisation support in order to make
the system more attractive to a wider range of users and increase adoption. We
need a simpler mechanism to deliver translations and other workflow data changes
in general.

## Considered options

We've only considered one option - this is the interim JSON-encoded workflow
document generated by the [json_links][0] module.

## Decision outcome

* Archivematica 1.9 will implement the proposed solution replacing the existing
  database tables.
* We do not currently intend to expose the ability to modify the workflow data
  to Archivematica users - but this may change in the future as the solution
  matures and becomes interoperable.
* The visualization and manipulation of the workflow data will be facilitated by
  a new tool that we're calling amflow.

## Links

* Main issue in GitHub: [#1101][1].
* [List of possible improvements][2] to the original JSON-encoded workflow
  documented proposed.
* [First analysis][3] done back in 2016.
* The [amflow][4] repository.

[0]: https://github.com/artefactual/archivematica/blob/stable/1.8.x/src/dashboard/src/components/administration/management/commands/json_links.py
[1]: https://github.com/artefactual/archivematica/issues/1101
[2]: https://gist.github.com/sevein/63e751acd37bde5590d680344ad8b3d5
[3]: https://gist.github.com/sevein/75732d85e129348dc32e6c4b15982bf8
[4]: https://github.com/sevein/amflow
